<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:DziennikPlecakowy.ViewModels"
             x:DataType="vm:ChangePasswordViewModel"
             x:Class="DziennikPlecakowy.Views.ChangePasswordPage"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="False"
             Style="{StaticResource PageStyle}">

    <VerticalStackLayout Padding="20" Spacing="10" VerticalOptions="Center">

        <Label Text="Musisz ustawić nowe hasło"
               Style="{StaticResource TitleLabel}"
               HorizontalOptions="Center"
               HorizontalTextAlignment="Center"
               Margin="20,0" />

        <Label Text="Twoje konto zostało oflagowane do wymuszonej zmiany hasła."
               Style="{StaticResource SecondaryTextLabel}"
               HorizontalOptions="Center"
               Margin="20,0,20,10" />

        <Entry Placeholder="Nowe hasło"
               Text="{Binding NewPassword}"
               IsPassword="True"
               Style="{StaticResource MainEntry}" 
               MaxLength="50" />

        <Entry Placeholder="Potwierdź nowe hasło"
               Text="{Binding ConfirmNewPassword}"
               IsPassword="True" 
               Style="{StaticResource MainEntry}" 
               MaxLength="50" />

        <Label Text="{Binding ErrorMessage}"
               Style="{StaticResource LabelError}"
               IsVisible="{Binding ErrorMessage, Converter={StaticResource IsNotNullOrEmptyConverter}}" />

        <ActivityIndicator IsRunning="{Binding IsBusy}" />

        <Button Text="Ustaw hasło"
                Command="{Binding ChangePasswordCommand}"
                IsEnabled="{Binding IsNotBusy}"
                Style="{StaticResource MainButton}" />

    </VerticalStackLayout>
</ContentPage>